---
title: "生成AIによる開発パラダイムを「演繹」から「帰納」で考える"
emoji: "🐥"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ['ai']
published: true
---

:::message
この記事はClaudeとGeminiと相談しながら、たまにo3から辛辣な意見をもらって書きました。
突飛な内容なので、感想/フィードバックどんな形でもとってもお待ちしてます。
:::
NotebookLMの音声要約はこちら
https://notebooklm.google.com/notebook/29452a45-74b1-4589-8279-fdc7a1515e2d/audio

ソフトウェア開発の手法はシステムの複雑化と市場の変化に対応するため、その思考様式を進化させてきた。本稿では、その進化を「演繹」と「帰納」の軸で捉え、「従来の開発」「TDDの導入」「生成AIの登場」、そして今後の方向性というフェーズで整理する。特に、生成AIが開発プロセスに与える影響と、それに伴うテスト戦略の変化について考察する。

## 1. 従来の開発：属人的な演繹プロセス

### 中心的な考え方
**「優秀な開発者が、仕様書から正しい実装を導き出す」**

### 品質保証の構造
- 開発者は仕様書から具体的な実装コードを論理的(演繹的)に導き出す。
- コードの正しさは、個々の開発者の経験・スキル・論理的思考力に大きく依存。コードレビューも、レビュアーの能力に左右される。
- 「正しい実装」とは何かが形式化されておらず、開発者の解釈に委ねられていた。

### 特徴と課題
- **高い属人性:** 実装の品質が個人の能力に強く依存し、スケールが困難。
- **検証の非形式性:** 品質の判断基準が暗黙的で、「動けば良い」という状態に陥りやすい。

アジャイル開発が登場し短いイテレーションでフィードバックを得ることで改善を図ったが、属人性や品質保証の課題は残った。

## 2. 自動テスト/TDDの導入：形式化されたテストを用いた帰納による品質保証の導入

「属人的な演繹」と「検証の非形式性」、すなわち「実装の品質をどう保証するか/し続けるか」という問いに対し、自動テストとTDD（テスト駆動開発）が一つの答えとなる。このアプローチにより継続的に理想の状態を明確化しやすくなった。

### 中心的な考え方
**「具体的な成功例によって(演繹への依存から帰納的な保証への移行をする)ことで、ロジックの正しさを保証する」**

### 品質保証の構造
- 従来の属人的な演繹（実装）に、**帰納**（形式化されたテスト）を組み合わせるハイブリッド型へ移行。
- **プロセスの変化:** TDDでは、開発者が曖昧な「正しい実装」を推測するのではなく、まず「この具体的なケース（テスト）で動くこと」を成功の定義としてコードで記述する。そして、その定義を満たす実装を後から行うことで、検証可能な具体例の集合として「正しさ」が保証できるようになった。

### 変化と残された課題
ユニットレベルでの品質を大きく向上させ開発者サイドの検証プロセスを堅牢にしたが、以下の困難が存在した。

- **コストの二重化:** 実装コストに加えてテスト定義コストが必要となり「追加作業」として認識される。実装前に全エッジケースを想定する認知的負荷も高く、経験の浅い開発者には大きな障壁となる。
- **品質投資の見えにくさ:** 防げたバグは数値化できず、初期コストのみが明確に見える。ROIが長期的にしか現れないため、ビジネス側は短期的な「動くソフトウェア」の納品を優先し、テスト作成を追加コストと見なした。

TDDは理想的な品質保証の仕組みを提供するが、その理想を実現するための総合的なコスト（実装＋テスト作成＋保守）組織が耐えられないケースがある。品質向上の長期的な利益よりも、短期的な納品圧力が勝ってしまう現実がある。

## 3. 生成AIの導入：演繹プロセスの再定義

生成AIの登場により、開発プロセスが大きく変化する。

### 実装の自動生成と認知限界
生成AIは自然言語からコードを自動生成できる。これにより開発者は実装の詳細記述から解放され、より上位の設計や要求定義に注力できるようになった。
一方で、AIが生成する実装は**その量と複雑さゆえに人間が詳細まで理解することが困難となることが予想される**。生成されたコードのすべてを人間がレビューし、その動作を完全に把握することは現実的ではない。

### TDDとの相補的関係
この状況において、TDDは新たな意味を持つ。かつてコスト高と見なされていたTDDが、AIが生成した実装の振る舞いを検証する実用的な手段として機能し始める。テストを先に定義すれば、AIはそれを満たす実装を生成し、開発者は実装の詳細を理解せずとも振る舞いを保証できる。

また、TDDが抱えていた「実装コストの二重化」という課題も、AIによる実装自動化によって軽減される。開発者はテスト設計に注力し、実装生成はAIが担う。このように、TDDとAIは相補的な関係が形成できる。

### 残課題
しかし、この組み合わせには根本的な限界が見える。AIにユニットテストのような実装レベルの例を与えても、その背後にある**ビジネスコンテキストまでは理解できない**。技術的にはテストをパスするが、ビジネスの意図とは異なる実装を生成するリスクが残る。

さらに、効率化を求める開発現場では、ユニットテストの作成すらもAIに任せようとする誘惑が生まれる。レビューしようにも、実装の詳細を把握していない状態で実装の一部分であるユニットテストをレビューすることは現実的ではなく、ユニットテストが形骸化する可能性が高い。

## 4. BDDとテスト戦略の再構築：帰納的アプローチの昇華

前章で明らかになった「ビジネス文脈の欠如」という課題は、私たちに新しいアプローチを要求する。

### 求められるアプローチ
**「ビジネスレベルの振る舞いの具体例から開発を行い、帰納的に品質を保証する」**

### BDDによる解決策とその実践の難しさ
BDD（振る舞い駆動開発）は、**ビジネス要求そのものを例として形式化**するアプローチであり、この要求に合致する。しかし、ここで新たな課題が浮上する：**そもそも人間が適切な振る舞い例を網羅的に洗い出せるのか？**

この根本的な問いに対して、BDDは**スリーアミーゴス（Three Amigos）によるExample Mapping**という実践を提案する。
- **プロダクトオーナー**がビジネス視点から、**開発者**が技術的実現性から、**テスター**がエッジケースの観点から、それぞれ振る舞い例を検討する。
- **Example Mapping**セッションを通じて、ルール、例、質問を可視化しながら、シナリオを体系的に整理する。
- この協調的プロセスによって初めて、個人の認知限界を超えた包括的な振る舞い例が形式化されるのである。

このプロセスを経て生まれる具体例は、共通言語（Gherkinなど）で記述される。

```gherkin
Feature: 商品購入時の消費税計算
Scenario: カート内の商品の合計金額に消費税を加算する
  Given カートに1000円の商品がある
  When ユーザーが注文を確定する
  Then 請求金額は消費税込みで1100円になる
```

このシナリオが「ビジネスレベルの品質保証（自動受け入れテスト）」であると同時に、「AIが実装を行うための高品質な前提（指示書）」としても機能する。人間による理想の具体化プロセスがAIの実装を導く土台となる。

### 新たなテスト戦略：三角形から逆三角形へ
この「BDDシナリオ」を開発の中心に据えるアプローチがテスト戦略の見直しを促す。

- **従来のテストピラミッド:** 演繹的実装を支えるため、実装に近いUnitテストを土台としていた。
- **AI時代の逆テストピラミッド:** AIによる実装を帰納的に保証するためビジネス価値に直結するBDDシナリオ（広義のE2E/受け入れテスト）を最も重要視する。

#### 新たな問い：AIが生成した「内部」をどう検証するか？
しかし、ここでまた新たな問いが生まれる。BDDでシステムの「外側の振る舞い」を保証したとして、AIが生成した「内部実装の妥当性」はどのように検証すればよいか。先ほども挙げたように人間はもはや実装の詳細を把握していないため、従来のようなUnitテストを書くことは困難である。

この問いに対する一つの答えが、[関数型ドメインモデリング](https://tatsu-zine.com/books/domain-modeling-made-functional)のアプローチである。
- 処理を**ワークフロー**として捉え、各処理を**ドメインモデルの状態遷移**として捉え「型」で表現する。
- 各処理の正しさを、技術的な実装詳細ではなく**ユビキタス言語に近い形式で表現されたドメインモデルの状態**として把握する。
  - 例：「注文受付」→「支払い待ち」→「支払い済み」→「発送準備中」といった、ビジネス上意味のある状態遷移として内部処理を理解する。
- この方法により、AIが生成した実装の各段階で、**ドメインエキスパートも理解しやすい形で正しさを検証**できるようになる。

## 結論：品質保証パラダイムの変遷

ソフトウェア開発における品質保証は、以下のように進化してきた。

1. **従来の開発：** 属人的な演繹に依存し、品質保証は非形式的であった
2. **TDDの導入：** 演繹（実装）と帰納（テスト）のハイブリッドによる形式的な品質保証を実現したが、総合的なコストが課題となった
3. **生成AI時代：** AIが演繹（実装）を担い、人間は帰納（ビジネスレベルの振る舞い定義）に特化する分業体制へ

この変遷において重要なのは、**品質保証の主軸が「演繹的な実装の正しさ」から「帰納的な振る舞いの定義」へとシフト**していることである。AIによって実装プロセスが自動化される中、人間の役割は「何を作るべきか」を具体例として定義しルール化する。その振る舞いを検証可能な形で形式化することに集約されていく。

生成AI時代の品質保証は、**人間が定義した理想状態（BDDシナリオ）によってAIの実装を制御し、帰納的に検証するプロセス**となる。

---

みたいなことを最近ずっとずっと考えてます
これを体現したくてずっとAgentic Coding用テンプレート(ただのToDoアプリ)を作ってます
ここら辺どなたかディスカッションしたりご飯食べながらお話ししませんか....

以下、また追加で記事にしようと思ってるのですが、関連しそうなやつです👇
頭の中の共有
参考まで

---

## 関連する実践と手法

### アジャイル開発：継続的な価値の検証
- BDDの前身として、**反復的な開発とフィードバック**の重要性を確立
- 頻繁なデモとレトロスペクティブにより、振る舞い例を継続的に洗練
- AI時代においても、人間とAIの協調的な反復プロセスの基盤となる

### プロトタイピング：理想状態の具体化
- 素早いフィードバックループにより、曖昧な要求を具体的な振る舞い例へと変換
- 動くプロトタイプを通じて、ステークホルダーと具体的な振る舞いについて対話できる

### 関数型プログラミングとCQRS：予測可能性の向上
- 冪等性を高めることによりAIが生成するコードの予測可能性が向上
- **CQRS**（コマンドクエリ責務分離）により、状態変更と参照を明確に分離し、各操作の意図を明確化
- 副作用の分離により、振る舞い例（BDDシナリオ）の記述が容易に

### 凝集性最大化とDRY原則の見直し
- AIのコンテキスト長制限内で最大の性能を引き出すため、関連コードの局所化を優先
- 重複を許容してでも、各モジュールの自己完結性を高める設計
- AIが各コンポーネントの振る舞いを正確に理解・生成

### オブザーバビリティ：実行時の帰納的検証
- BDDシナリオでカバーできない複雑な相互作用を、本番環境で継続的に検証
- 分散トレーシングやメトリクスにより、AIが生成したシステムの実際の振る舞いを可視化
- 異常検知により、想定外の振る舞いを早期に発見し、新たな帰納的例として活用

### ガードレール：AIの振る舞いの制約
- **Lintやpre-commitフック**により、AIが生成するコードが一定の品質基準を満たすことを保証
- 型システムやスキーマ定義により、AIの出力を制約し、意図しない振る舞いを防止
- コード規約の自動適用により、人間が読みやすいコードの生成を促進

### テスト実行の並列化：E2E中心の品質保証を支える基盤
- E2Eテスト中心のアプローチは実行時間の増大を招くため、**コンテナ技術を活用した大規模並列実行**が不可欠
- テスト環境の完全な分離(localhostを使わないなど)により、並列実行時の干渉を防ぎ、信頼性の高い検証を実現